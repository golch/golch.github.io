---
layout: post
title: 'angularJS 책 “프로 angularJS” 실습 #3'
date: 
type: post
published: false
status: draft
categories:
- "프로그래밍"
tags: []
meta:
  _edit_last: '16999834'
  geo_public: '0'
  _wpcom_is_markdown: '1'
author:
  login: golch51
  email: p2r64h32@gmail.com
  display_name: golch51
  first_name: ''
  last_name: ''
---
<p>지난 포스팅 보기 :<br />
<a href="https://golch51.wordpress.com/2016/04/27/angularjs-%EC%B1%85-%ED%94%84%EB%A1%9C-angularjs-%EC%8B%A4%EC%8A%B5-1/">https://golch51.wordpress.com/2016/04/27/angularjs-책-프로-angularjs-실습-1/</a><br />
<a href="https://golch51.wordpress.com/2016/05/02/angularjs-%EC%B1%85-%ED%94%84%EB%A1%9C-angularjs-%EC%8B%A4%EC%8A%B5-2/">https://golch51.wordpress.com/2016/05/02/angularjs-책-프로-angularjs-실습-2/</a></p>
<p>이번에는 가짜 상품데이터를 만들어서 불러오는 코드를 작성한다. 이 가짜 상품데이터는 추후에 진짜 데이터(deployd서버)로 바꿀 예정이다. 가짜 상품데이터가 들어있는 sportsStore.js파일을 먼저 작성하자.</p>
<p>[code lang=text]<br />
angular.module(&quot;sportsStore&quot;)<br />
.controller(&quot;sportsStoreCtrl&quot;, function($scope){</p>
<p>  $scope.data = {<br />
    products: [<br />
      {name: &quot;Product #1&quot;, description: &quot;A product&quot;,<br />
        category: &quot;Category #1&quot;, price: 100},<br />
      {name: &quot;Product #2&quot;, description: &quot;A product&quot;,<br />
        category: &quot;Category #1&quot;, price: 110},<br />
      {name: &quot;Product #3&quot;, description: &quot;A product&quot;,<br />
        category: &quot;Category #2&quot;, price: 210},<br />
      {name: &quot;Product #4&quot;, description: &quot;A product&quot;,<br />
        category: &quot;Category #3&quot;, price: 202} ]<br />
  };<br />
});<br />
[/code]</p>
<p>이 파일은 아래 위치에 저장한다.</p>
<p><a href="http://golch51.files.wordpress.com/2016/05/138d70c158ec6e53a44af392bd2379e3.png"><img src="{{ site.baseurl }}/assets/138d70c158ec6e53a44af392bd2379e3.png" alt="" width="643" height="278" class="alignnone size-full wp-image-463" /></a></p>
<p>그리고 상품데이터를 불러오는 코드를 app.html 파일에 추가한다.</p>
<p>[code lang=text]<br />
&lt;!DOCTYPE html&gt;<br />
&lt;html ng-app=&quot;sportsStore&quot;&gt;<br />
&lt;head&gt;<br />
  &lt;title&gt;SportsStore&lt;/title&gt;<br />
  &lt;a href=&quot;http://angular.js&quot;&gt;http://angular.js&lt;/a&gt;<br />
  &lt;link href=&quot;bootstrap.css&quot; rel=&quot;stylesheet&quot;/&gt;<br />
  &lt;link href=&quot;bootstrap-theme.css&quot; rel=&quot;stylesheet&quot;/&gt;</p>
<p>    angular.module(&quot;sportsStore&quot;,[]);</p>
<p>  &lt;a href=&quot;http://controllers/sportsStore.js&quot;&gt;http://controllers/sportsStore.js&lt;/a&gt;<br />
&lt;/head&gt;<br />
&lt;body ng-controller=&quot;sportsStoreCtrl&quot;&gt;<br />
  &lt;div class=&quot;navbar navbar-inverse&quot;&gt;<br />
    &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;SPORTS STORE&lt;/a&gt;<br />
  &lt;/div&gt;<br />
  &lt;div class=&quot;panel panel-default row&quot;&gt;<br />
    &lt;div class=&quot;col-xs-3&quot;&gt;<br />
      Categories go here<br />
    &lt;/div&gt;<br />
    &lt;div class=&quot;col-xs-8&quot;&gt;<br />
      &lt;div class=&quot;well&quot;&gt;<br />
        &lt;h3&gt;<br />
          &lt;strong&gt;{{item.name}}&lt;/strong&gt;<br />
          &lt;span class=&quot;pull-right label label-primary&quot;&gt;<br />
            {{item.price | currency}}<br />
          &lt;/span&gt;<br />
        &lt;/h3&gt;<br />
        &lt;span class=&quot;lead&quot;&gt;{{item.description}}&lt;/span&gt;<br />
      &lt;/div&gt;<br />
    &lt;/div&gt;<br />
  &lt;/div&gt;<br />
&lt;/body&gt;</p>
<p>&lt;/html&gt;<br />
[/code]</p>
<p>여기까지 하고 app.html파일을 열어보면 아래와 같이 보이게 된다.<br />
파일에 들어간 angularjs 문법의 의미나 각종 내용은 여기서 설명하지 않겠다. 책을 읽어보고 이해하도록 하자. 여기에는 실습할 때 잘 안되는 부분이나 책에 미처 들어가지 못한 설명 위주로 기록할 것이다.</p>
<p>상품목록(product)은 만들어졌으니 이제 카테고리 목록을 만들어보자.<br />
customFilters.js 파일을 만든다.</p>
<p><a href="http://golch51.files.wordpress.com/2016/05/2c35fc55289e7eae11d47ccffd70cad9.png"><img src="{{ site.baseurl }}/assets/2c35fc55289e7eae11d47ccffd70cad9.png" alt="" width="643" height="254" class="alignnone size-full wp-image-464" /></a></p>
<p>[code lang=text]<br />
angular.module(&quot;customFilters&quot;,[])<br />
.filter(&quot;unique&quot;, function(){<br />
  return function (data, propertyName){<br />
    if(angular.isArray(data) &amp;&amp; angular.isString(propertyName)){<br />
      var results = [];<br />
      var keys = {};<br />
      for(var i=0; i&lt;data.length; i++){<br />
        var val = data[i][propertyName];<br />
        if(angular.isUndefined(keys[val])){<br />
          keys[val] = true;<br />
          results.push(val);<br />
        }<br />
      }<br />
      return results;<br />
    }else{<br />
      return data;<br />
    }<br />
  }<br />
});<br />
[/code]</p>
<p>[code lang=text]<br />
&lt;!DOCTYPE html&gt;<br />
&lt;html ng-app=&quot;sportsStore&quot;&gt;<br />
&lt;head&gt;<br />
  &lt;title&gt;SportsStore&lt;/title&gt;<br />
  &lt;a href=&quot;http://angular.js&quot;&gt;http://angular.js&lt;/a&gt;<br />
  &lt;link href=&quot;bootstrap.css&quot; rel=&quot;stylesheet&quot;/&gt;<br />
  &lt;link href=&quot;bootstrap-theme.css&quot; rel=&quot;stylesheet&quot;/&gt;</p>
<p>    angular.module(&quot;sportsStore&quot;,[&quot;customFilters&quot;]);</p>
<p>  &lt;a href=&quot;http://controllers/sportsStore.js&quot;&gt;http://controllers/sportsStore.js&lt;/a&gt;<br />
  &lt;a href=&quot;http://filters/customFilters.js&quot;&gt;http://filters/customFilters.js&lt;/a&gt;<br />
&lt;/head&gt;<br />
&lt;body ng-controller=&quot;sportsStoreCtrl&quot;&gt;<br />
  &lt;div class=&quot;navbar navbar-inverse&quot;&gt;<br />
    &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;SPORTS STORE&lt;/a&gt;<br />
  &lt;/div&gt;<br />
  &lt;div class=&quot;panel panel-default row&quot;&gt;<br />
    &lt;div class=&quot;col-xs-3&quot;&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;Home&lt;/a&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;<br />
        {{item}}&lt;/a&gt;<br />
    &lt;/div&gt;<br />
    &lt;div class=&quot;col-xs-8&quot;&gt;<br />
      &lt;div class=&quot;well&quot;&gt;<br />
        &lt;h3&gt;<br />
          &lt;strong&gt;{{item.name}}&lt;/strong&gt;<br />
          &lt;span class=&quot;pull-right label label-primary&quot;&gt;<br />
            {{item.price | currency}}<br />
          &lt;/span&gt;<br />
        &lt;/h3&gt;<br />
        &lt;span class=&quot;lead&quot;&gt;{{item.description}}&lt;/span&gt;<br />
      &lt;/div&gt;<br />
    &lt;/div&gt;<br />
  &lt;/div&gt;<br />
&lt;/body&gt;</p>
<p>&lt;/html&gt;<br />
[/code]</p>
<p>다음은 상품에 필터를 적용해보겠다.<br />
productListControllers.js</p>
<p><a href="http://golch51.files.wordpress.com/2016/05/138d70c158ec6e53a44af392bd2379e3.png"><img src="{{ site.baseurl }}/assets/138d70c158ec6e53a44af392bd2379e3.png" alt="" width="643" height="278" class="alignnone size-full wp-image-463" /></a></p>
<p>[code lang=text]<br />
angular.module(&quot;sportsStore&quot;)<br />
.controller(&quot;productListCtrl&quot;, function ($scope, $filter){<br />
  var selectedCategory = null;</p>
<p>  $scope.selectCategory = function (newCategory){<br />
    selectedCategory = newCategory;<br />
  }</p>
<p>  $scope.categoryFilterFn = function(product){<br />
    return selectedCategory == null ||<br />
    product.category == selectedCategory;<br />
  }<br />
});<br />
[/code]</p>
<p>app.html</p>
<p>[code lang=text]<br />
&lt;!DOCTYPE html&gt;<br />
&lt;html ng-app=&quot;sportsStore&quot;&gt;<br />
&lt;head&gt;<br />
  &lt;title&gt;SportsStore&lt;/title&gt;<br />
  &lt;a href=&quot;http://angular.js&quot;&gt;http://angular.js&lt;/a&gt;<br />
  &lt;link href=&quot;bootstrap.css&quot; rel=&quot;stylesheet&quot;/&gt;<br />
  &lt;link href=&quot;bootstrap-theme.css&quot; rel=&quot;stylesheet&quot;/&gt;</p>
<p>    angular.module(&quot;sportsStore&quot;,[&quot;customFilters&quot;]);</p>
<p>  &lt;a href=&quot;http://controllers/sportsStore.js&quot;&gt;http://controllers/sportsStore.js&lt;/a&gt;<br />
  &lt;a href=&quot;http://filters/customFilters.js&quot;&gt;http://filters/customFilters.js&lt;/a&gt;<br />
  &lt;a href=&quot;http://controllers/productListControllers.js&quot;&gt;http://controllers/productListControllers.js&lt;/a&gt;<br />
&lt;/head&gt;<br />
&lt;body ng-controller=&quot;sportsStoreCtrl&quot;&gt;<br />
  &lt;div class=&quot;navbar navbar-inverse&quot;&gt;<br />
    &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;SPORTS STORE&lt;/a&gt;<br />
  &lt;/div&gt;<br />
  &lt;div class=&quot;panel panel-default row&quot;&gt;<br />
    &lt;div class=&quot;col-xs-3&quot;&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;Home&lt;/a&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;<br />
        {{item}}&lt;/a&gt;<br />
    &lt;/div&gt;<br />
    &lt;div class=&quot;col-xs-8&quot;&gt;<br />
      &lt;div class=&quot;well&quot;&gt;<br />
        &lt;h3&gt;<br />
          &lt;strong&gt;{{item.name}}&lt;/strong&gt;<br />
          &lt;span class=&quot;pull-right label label-primary&quot;&gt;<br />
            {{item.price | currency}}<br />
          &lt;/span&gt;<br />
        &lt;/h3&gt;<br />
        &lt;span class=&quot;lead&quot;&gt;{{item.description}}&lt;/span&gt;<br />
      &lt;/div&gt;<br />
    &lt;/div&gt;<br />
  &lt;/div&gt;<br />
&lt;/body&gt;</p>
<p>&lt;/html&gt;<br />
[/code]</p>
<p>다음은 선택한 카테고리를 강조해보자.<br />
productListController.js 파일 수정</p>
<p>[code lang=text]<br />
angular.module(&quot;sportsStore&quot;)<br />
.constant(&quot;productListActiveClass&quot;, &quot;btn-primary&quot;)<br />
.controller(&quot;productListCtrl&quot;, function ($scope, $filter, productListActiveClass){<br />
  var selectedCategory = null;</p>
<p>  $scope.selectCategory = function (newCategory){<br />
    selectedCategory = newCategory;<br />
  }</p>
<p>  $scope.categoryFilterFn = function(product){<br />
    return selectedCategory == null ||<br />
    product.category == selectedCategory;<br />
  }</p>
<p>  $scope.getCategoryClass = function(category){<br />
    return selectedCategory == category ? productListActiveClass : &quot;&quot;;<br />
  }<br />
});<br />
[/code]</p>
<p>app.html 파일 수정</p>
<p>[code lang=text]<br />
&lt;!DOCTYPE html&gt;<br />
&lt;html ng-app=&quot;sportsStore&quot;&gt;<br />
&lt;head&gt;<br />
  &lt;title&gt;SportsStore&lt;/title&gt;<br />
  &lt;a href=&quot;http://angular.js&quot;&gt;http://angular.js&lt;/a&gt;<br />
  &lt;link href=&quot;bootstrap.css&quot; rel=&quot;stylesheet&quot;/&gt;<br />
  &lt;link href=&quot;bootstrap-theme.css&quot; rel=&quot;stylesheet&quot;/&gt;</p>
<p>    angular.module(&quot;sportsStore&quot;,[&quot;customFilters&quot;]);</p>
<p>  &lt;a href=&quot;http://controllers/sportsStore.js&quot;&gt;http://controllers/sportsStore.js&lt;/a&gt;<br />
  &lt;a href=&quot;http://filters/customFilters.js&quot;&gt;http://filters/customFilters.js&lt;/a&gt;<br />
  &lt;a href=&quot;http://controllers/productListControllers.js&quot;&gt;http://controllers/productListControllers.js&lt;/a&gt;<br />
&lt;/head&gt;<br />
&lt;body ng-controller=&quot;sportsStoreCtrl&quot;&gt;<br />
  &lt;div class=&quot;navbar navbar-inverse&quot;&gt;<br />
    &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;SPORTS STORE&lt;/a&gt;<br />
  &lt;/div&gt;<br />
  &lt;div class=&quot;panel panel-default row&quot;&gt;<br />
    &lt;div class=&quot;col-xs-3&quot;&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;Home&lt;/a&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;<br />
        {{item}}&lt;/a&gt;<br />
    &lt;/div&gt;<br />
    &lt;div class=&quot;col-xs-8&quot;&gt;<br />
      &lt;div class=&quot;well&quot;&gt;<br />
        &lt;h3&gt;<br />
          &lt;strong&gt;{{item.name}}&lt;/strong&gt;<br />
          &lt;span class=&quot;pull-right label label-primary&quot;&gt;<br />
            {{item.price | currency}}<br />
          &lt;/span&gt;<br />
        &lt;/h3&gt;<br />
        &lt;span class=&quot;lead&quot;&gt;{{item.description}}&lt;/span&gt;<br />
      &lt;/div&gt;<br />
    &lt;/div&gt;<br />
  &lt;/div&gt;<br />
&lt;/body&gt;</p>
<p>&lt;/html&gt;<br />
[/code]</p>
<p>마지막으로 페이징기능을 추가해보자.<br />
productListControllers.js 파일 수정</p>
<p>[code lang=text]<br />
angular.module(&quot;sportsStore&quot;)<br />
.constant(&quot;productListActiveClass&quot;, &quot;btn-primary&quot;)<br />
.constant(&quot;productListPageCount&quot;, 3)<br />
.controller(&quot;productListCtrl&quot;, function ($scope, $filter, productListActiveClass, productListPageCount){<br />
  var selectedCategory = null;</p>
<p>  $scope.selectedPage = 1;<br />
  $scope.pageSize = productListPageCount;</p>
<p>  $scope.selectCategory = function (newCategory){<br />
    selectedCategory = newCategory;<br />
    $scope.selectedPage = 1;<br />
  }</p>
<p>  $scope.selectPage = function(newPage){<br />
    $scope.selectedPage = newPage;<br />
  }</p>
<p>  $scope.categoryFilterFn = function(product){<br />
    return selectedCategory == null ||<br />
    product.category == selectedCategory;<br />
  }</p>
<p>  $scope.getCategoryClass = function(category){<br />
    return selectedCategory == category ? productListActiveClass : &quot;&quot;;<br />
  }</p>
<p>  $scope.getPageClass = function(page){<br />
    return $scope.selectedPage == page ? productListActiveClass : &quot;&quot;;<br />
  }<br />
});<br />
[/code]</p>
<p>customFilters.js파일 수정</p>
<p>[code lang=text]<br />
angular.module(&quot;customFilters&quot;,[])<br />
.filter(&quot;unique&quot;, function(){<br />
  return function (data, propertyName){<br />
    if(angular.isArray(data) &amp;&amp; angular.isString(propertyName)){<br />
      var results = [];<br />
      var keys = {};<br />
      for(var i=0; i&lt;data.length; i++){<br />
        var val = data[i][propertyName];<br />
        if(angular.isUndefined(keys[val])){<br />
          keys[val] = true;<br />
          results.push(val);<br />
        }<br />
      }<br />
      return results;<br />
    }else{<br />
      return data;<br />
    }<br />
  }<br />
})<br />
.filter(&quot;range&quot;, function($filter){<br />
  return function(data, page, size){<br />
    if(angular.isArray(data) &amp;&amp; angular.isNumber(page) &amp;&amp; angular.isNumber(size)){<br />
      var start_index = (page-1) * size;<br />
      if(data.length &lt; start_index){<br />
        return [];<br />
      }else{<br />
        return $filter(&quot;limitTo&quot;)(data.splice(start_index), size);<br />
      }<br />
    }else{<br />
      return data;<br />
    }<br />
  }<br />
})<br />
.filter(&quot;pageCount&quot;, function (){<br />
  return function (data, size){<br />
    if(angular.isArray(data)){<br />
      var result = [];<br />
      for(var i=0; i&lt;Math.ceil(data.length / size); i++){<br />
        result.push(i);<br />
      }<br />
      return result;<br />
    }else{<br />
      return data;<br />
    }<br />
  }<br />
});<br />
[/code]</p>
<p>app.html 수정</p>
<p>[code lang=text]<br />
&lt;!DOCTYPE html&gt;<br />
&lt;html ng-app=&quot;sportsStore&quot;&gt;<br />
&lt;head&gt;<br />
  &lt;title&gt;SportsStore&lt;/title&gt;<br />
  &lt;a href=&quot;http://angular.js&quot;&gt;http://angular.js&lt;/a&gt;<br />
  &lt;link href=&quot;bootstrap.css&quot; rel=&quot;stylesheet&quot;/&gt;<br />
  &lt;link href=&quot;bootstrap-theme.css&quot; rel=&quot;stylesheet&quot;/&gt;</p>
<p>    angular.module(&quot;sportsStore&quot;,[&quot;customFilters&quot;]);</p>
<p>  &lt;a href=&quot;http://controllers/sportsStore.js&quot;&gt;http://controllers/sportsStore.js&lt;/a&gt;<br />
  &lt;a href=&quot;http://filters/customFilters.js&quot;&gt;http://filters/customFilters.js&lt;/a&gt;<br />
  &lt;a href=&quot;http://controllers/productListControllers.js&quot;&gt;http://controllers/productListControllers.js&lt;/a&gt;<br />
&lt;/head&gt;<br />
&lt;body ng-controller=&quot;sportsStoreCtrl&quot;&gt;<br />
  &lt;div class=&quot;navbar navbar-inverse&quot;&gt;<br />
    &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;SPORTS STORE&lt;/a&gt;<br />
  &lt;/div&gt;<br />
  &lt;div class=&quot;panel panel-default row&quot;&gt;<br />
    &lt;div class=&quot;col-xs-3&quot;&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;Home&lt;/a&gt;<br />
      &lt;a class=&quot;btn btn-block btn-default btn-1g&quot;&gt;<br />
        {{item}}&lt;/a&gt;<br />
    &lt;/div&gt;<br />
    &lt;div class=&quot;col-xs-8&quot;&gt;<br />
      &lt;div class=&quot;well&quot;&gt;<br />
        &lt;h3&gt;<br />
          &lt;strong&gt;{{item.name}}&lt;/strong&gt;<br />
          &lt;span class=&quot;pull-right label label-primary&quot;&gt;<br />
            {{item.price | currency}}<br />
          &lt;/span&gt;<br />
        &lt;/h3&gt;<br />
        &lt;span class=&quot;lead&quot;&gt;{{item.description}}&lt;/span&gt;<br />
      &lt;/div&gt;<br />
      &lt;div class=&quot;pull-right btn-group&quot;&gt;<br />
        &lt;a class=&quot;btn btn-default&quot;&gt;<br />
          {{$index + 1}}<br />
        &lt;/a&gt;<br />
      &lt;/div&gt;<br />
    &lt;/div&gt;<br />
  &lt;/div&gt;<br />
&lt;/body&gt;</p>
<p>&lt;/html&gt;<br />
[/code]</p>
<p>다음 장에서는 deployd 서버에서 실제 데이터를 가져와서 사용하고, 장바구니를 구현하고, 결제 프로세스를 만들 것이다.</p>
<table cellspacing="0" cellpadding="0" width="100%">
<tr>
<td>이 글은 Evernote에서 작성되었습니다. Evernote는 하나의 업무 공간입니다. <a href="https://www.evernote.com/getit?email_name=emailNote&amp;email_guid=9f899b7f-5a0a-4d4d-8dff-bf8c2f2e3485&amp;email_link=download_app">Evernote를 다운로드하세요</a>.</td>
</tr>
</table>
